#pragma once
#include <stdint.h>
#include <stdlib.h>

#include "align_common.h"

typedef struct  __attribute__((__packed__)) {
    uint64_t user_size;
    uint64_t user_alignment; // alignment in bytes
} malign_metadata_posix;

malign_metadata_posix * malign_meta_posix_new(uint64_t user_size, posix_alignments user_alignment) {

    malign_metadata_posix *self;

    if (UNLIKELY(!(self = (malign_metadata_posix *)malloc(sizeof(malign_metadata_posix)))))
        return NULL;

    self->user_size      = user_size;
    self->user_alignment = (uint8_t)user_alignment;

    return self;
}

void malign_meta_posix_free(malign_metadata_posix *self) {
    free(self);
}